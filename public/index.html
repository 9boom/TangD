
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Game Style Map</title>

  <link rel="icon" type="/png" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">

  <link
    href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css"
    rel="stylesheet"
  />

  <style>
    html, body {
      margin: 0;
      height: 100%;
    }
    #map {
      width: 100%;
      height: 100%;
    }

    /* ‡∏à‡∏∏‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏≤ */
    .player {
      width: 18px;
      height: 18px;
      background: #00aaff;
      border: 3px solid white;
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(0,170,255,0.8);
    }

    /* ‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ */
    .bin {
      font-size: 24px;
    }
  </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>

<script>
const map = new maplibregl.Map({
  container: 'map',
  style: {
    version: 8,
    sources: {
      carto: {
        type: 'raster',
        tiles: [
          'https://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png',
          'https://b.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png',
          'https://c.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png'
        ],
        tileSize: 256
      }
    },
    layers: [
      {
        id: 'carto-base',
        type: 'raster',
        source: 'carto'
      }
    ]
  },

  center: [100.5018, 13.7563],
  zoom: 16,
  pitch: 60,      // üî• ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
  bearing: -20    // üî• ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
});

map.addControl(new maplibregl.NavigationControl());

/* =========================
   ‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥
========================= */
const bins = [
  [100.5030, 13.7570],
  [100.5005, 13.7555],
  [100.5022, 13.7548]
];

bins.forEach(pos => {
  const el = document.createElement('div');
  el.className = 'bin';
  el.textContent = 'üóëÔ∏è';

  new maplibregl.Marker(el)
    .setLngLat(pos)
    .addTo(map);
});

/* =========================
   ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡πÄ‡∏£‡∏≤)
========================= */
const playerEl = document.createElement('div');
playerEl.className = 'player';

const playerMarker = new maplibregl.Marker(playerEl);

if (navigator.geolocation) {
  navigator.geolocation.watchPosition(
    pos => {
      const lng = pos.coords.longitude;
      const lat = pos.coords.latitude;
      const heading = pos.coords.heading || 0;

      playerMarker
        .setLngLat([lng, lat])
        .addTo(map);

      // ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏•‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏Å‡∏°
      map.easeTo({
        center: [lng, lat],
        bearing: heading,
        zoom: 17,
        pitch: 60,
        duration: 1000
      });
    },
    err => {
      console.error(err);
      alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ");
    },
    {
      enableHighAccuracy: true
    }
  );
}
</script>

</body>
</html>
